# Neo4j Configuration
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=password

# LLM Configuration
LLM_API_BASE=http://localhost:8000/v1
LLM_API_KEY=EMPTY
LLM_MODEL=models/gemma-2-2b-it
LLM_TIMEOUT=60.0

# Graph Construction Chunking
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# Ontology Discovery Chunking
ONTOLOGY_CHUNK_SIZE=1000
ONTOLOGY_CHUNK_OVERLAP=200

# Ontology Configuration
ONTOLOGY_PATH=ontology.json

# Discovery Configuration
ONTOLOGY_DISCOVERY_PROMPT="You are an expert in 3GPP standards and Knowledge Graph engineering. \nAnalyze the technical specification and extract a HIGH-LEVEL ONTOLOGY (schema).\n\n[GENERICITY RULE]: You must only extract GENERIC ENTITY TYPES. Do not use specific names like \"UE\", \"gNB\", or \"RRCConnectionRequest\" as labels. Instead, map them to broad categories:\n- Specific devices/entities -> \"NetworkNode\"\n- Specific messages/signals -> \"ProtocolMessage\"\n- Specific timers/counters -> \"Timer\"\n- Specific operations/flows -> \"Procedure\"\n- Specific states/modes -> \"UserState\"\n\nInstructions:\n1. Identify the key GENERIC ENTITY TYPES (Nodes) mentioned.\n2. Identify the VALID RELATIONSHIPS (Edges) between these types using core verbs (e.g., SENDS_TO, TRIGGERS, TRANSITIONS_TO, CONTAINS).\n3. Define \"ALLOWED_PROPERTIES\" for each relationship to capture where specific technical details (like message names) should be stored later.\n\nReturn STRICTLY a JSON object with:\n{{\n  \"node_types\": [{\"label\": \"GenericLabel\", \"description\": \"Definition\"}],\n  \"relationship_types\": [\n    {{\n      \"source\": \"SourceLabel\", \n      \"type\": \"CORE_REL_TYPE\", \n      \"target\": \"TargetLabel\",\n      \"allowed_properties\": [\"list\", \"of\", \"property\", \"keys\"]\n    }}\n  ]\n}}\n\nSource Text:\n{text}\n\nJSON Output:"

# Extraction Prompt
TRIPLE_EXTRACTION_PROMPT="You are a 3GPP Knowledge Graph expert. \nExtract knowledge triples from the text strictly following the provided ONTOLOGY.\n\nONTOLOGY:\n{ontology}\n\nInstructions:\n1. [STRICT RULE]: Only use Node Labels and Relationship Types defined in the ONTOLOGY. NEVER invent new relationship types.\n2. [MAPPING RULE]: Map specific entities in the text to their generic Node Labels from the ontology (e.g., \"UE\" -> label \"NetworkNode\", \"RRCSetup\" -> label \"ProtocolMessage\").\n3. [PROPERTY RULE]: Extract all technical details, conditions, and names into the \"edge_properties\" object.\n4. Return strictly a JSON object with a key \"triples\".\n\nExpected Triple Structure Example:\n{{\n  \"head\": \"UE\",\n  \"head_label\": \"NetworkNode\",\n  \"type\": \"SENDS_TO\",\n  \"edge_properties\": {{\n    \"message\": \"RRCSetupRequest\",\n    \"channel\": \"CCCH\"\n  }},\n  \"tail\": \"gNB\",\n  \"tail_label\": \"NetworkNode\"\n}}\n\nText:\n{text}\n\nJSON Output:"

# Consolidation Prompt
ONTOLOGY_CONSOLIDATION_PROMPT="You are a Senior Ontology Engineer. Your job is to take raw extractions and consolidate them into a STRICT 3GPP SCHEMA.\n\n[STRICT CATEGORIZATION]: Every node must be categorized into one of these 5 types. No exceptions:\n1. NetworkNode (Nodes, devices, entities)\n2. ProtocolMessage (All messages, PDUs, signals)\n3. Timer (All time-based processes)\n4. Procedure (All sequences of steps, methods)\n5. UserState (All states, modes, conditions)\n\nInstructions:\n1. Merge all specific labels found in the raw nodes into these 5 generic types.\n2. Standardize relationship types into a small set (10-15) of core verbs.\n3. Merge the \"allowed_properties\" for each relationship to ensure a comprehensive schema.\n\nRaw Node Types:\n{nodes}\n\nRaw Relationship Types:\n{relationships}\n\nReturn STRICTLY a JSON object with node_types and relationship_types."
