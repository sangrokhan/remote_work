# Neo4j Configuration
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=password

# LLM Configuration
LLM_API_BASE=http://192.168.1.2:8000/v1
LLM_API_KEY=EMPTY
LLM_MODEL=models/gemma-2-2b-it
LLM_TIMEOUT=300.0

# Graph Construction Chunking
CHUNK_SIZE=500
CHUNK_OVERLAP=100

# Ontology Discovery Chunking
ONTOLOGY_CHUNK_SIZE=500
ONTOLOGY_CHUNK_OVERLAP=100

# Ontology Configuration
ONTOLOGY_PATH=ontology_output.json

# Discovery Prompt
ONTOLOGY_DISCOVERY_PROMPT="You are a 3GPP Ontology Architect.
Analyze the text to discover domain entities and their interaction patterns.

FIXED NODE TYPES (DO NOT MODIFY OR ADD):
- NetworkNode, ProtocolMessage, Timer, Procedure, UserState

ALLOWED RELATIONSHIP TYPES:
{relation_types}

Instructions:
1. Identify Domain Labels (e.g., 'UE', 'gNB') and map them to one of the FIXED 'node_type' categories above.
2. DO NOT invent new node types. Use ONLY the 5 listed above.
3. Identify Relationship Patterns (e.g., 'UE' SENDS to 'gNB') and define descriptive properties for them.
4. You MUST ONLY use relationship types from the ALLOWED list above.
5. Relationships MUST use CAPITAL LETTERS.

Return STRICTLY a JSON object with keys 'nodes' and 'relations':
{{
  \"nodes\": [
    {{
      \"label\": \"UE\", 
      \"node_type\": \"NetworkNode\",
      \"description\": \"User Equipment\", 
      \"properties\": {{
        \"id\": \"Unique identifier for the UE in the local cell scope\", 
        \"state\": \"The RRC connection state (e.g., IDLE, CONNECTED, INACTIVE)\"
      }}
    }}
  ],
  \"relations\": [
    {{
      \"source\": \"UE\", 
      \"target\": \"gNB\", 
      \"type\": \"SENDS\", 
      \"properties\": {{
        \"message_name\": \"The specific 3GPP signaling message name (e.g., RRCSetupRequest)\", 
        \"interface\": \"The 3GPP interface used for transmission (e.g., Uu, N2, Xn)\"
      }}
    }}
  ]
}}

Text:
{text}

JSON Output:"

# Extraction Prompt
TRIPLE_EXTRACTION_PROMPT="You are a 3GPP Knowledge Graph expert. 
Extract knowledge triples strictly following the provided LIMITATIONS and ONTOLOGY.

NODE TYPES (STRICT LIMITATION):
{node_types}

RELATIONSHIP TYPES (STRICT LIMITATION):
{relation_types}

DISCOVERED PROPERTIES (Ontology):
{ontology}

Instructions:
1. Map entities in the text to the specific 'label' and 'node_type' in the Ontology.
2. The 'node_type' MUST be one of the FIXED LIMITATIONS provided.
3. Use the discovered 'properties' for both nodes and edges.
4. Only use Relationship Types listed in the STRICT LIMITATION.
5. If an interaction matches a relationship pattern (Source -> Type -> Target), extract it with all properties.

Example Triple:
{{
  \"head\": \"UE\",
  \"head_label\": \"UE\",
  \"head_type\": \"NetworkNode\",
  \"type\": \"SENDS\",
  \"edge_properties\": {{\"message_name\": \"RRCSetupRequest\", \"interface\": \"Uu\"}},
  \"tail\": \"gNB\",
  \"tail_label\": \"gNB\",
  \"tail_type\": \"NetworkNode\"
}}

Text:
{text}

JSON Output:"

# Consolidation Prompt
ONTOLOGY_CONSOLIDATION_PROMPT="You are a 3GPP Ontology Architect.
Consolidate the discovered domain entities and relationship patterns into a SINGLE UNIFIED SCHEMA with 'nodes' and 'relations' keys.

STRICT RULES:
1. ONLY use the 3GPP domain (UE, gNB, AMF, UPF, etc.). 
2. Every node MUST have a 'node_type' from the FIXED LIST: NetworkNode, ProtocolMessage, Timer, Procedure, UserState. DO NOT use any other types.
3. ALLOWED RELATIONSHIP TYPES: {relation_types}. You MUST ONLY use these types.
4. DO NOT merge specific labels like 'UE' and 'gNB' into a single 'NetworkNode' entry. Keep them separate.
5. Consolidate properties: If 'UE' has 'id' in one schema and 'state' in another, the final 'UE' must have BOTH.
6. Ensure all Relationship Types are in CAPITAL LETTERS and from the allowed list.

Return STRICTLY a JSON object with keys 'nodes' and 'relations'.

Input Schemas to Consolidate:
{nodes}
"
