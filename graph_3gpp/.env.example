# Neo4j Configuration
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=password

# LLM Configuration
LLM_API_BASE=http://localhost:8000/v1
LLM_API_KEY=EMPTY
LLM_MODEL=models/gemma-2-2b-it
LLM_TIMEOUT=60.0

# Graph Construction Chunking
CHUNK_SIZE=256
CHUNK_OVERLAP=20

# Ontology Discovery Chunking
ONTOLOGY_CHUNK_SIZE=4000
ONTOLOGY_CHUNK_OVERLAP=500

# Ontology Configuration
ONTOLOGY_PATH=ontology.json

# Discovery Configuration
ONTOLOGY_DISCOVERY_PROMPT="You are an expert in 3GPP standards and Knowledge Graph engineering. \nAnalyze the following technical specification and extract the core ONTOLOGY (schema).\n\nInstructions:\n1. Identify the key ENTITY TYPES (Nodes) mentioned (e.g., NetworkNode, ProtocolMessage, Parameter, Timer, State).\n2. Identify the VALID RELATIONSHIPS (Edges) between these types.\n   - [CRITICAL RULE]: Limit the relationship types to a small set of 10-15 core conceptual verbs (e.g., SENDS_TO, TRIGGERS, TRANSITIONS_TO, CONTAINS, AFFECTS, DEPENDS_ON).\n   - DO NOT create highly specific relationships like 'SENDS_RRC_SETUP'.\n3. Instead of specific relationship types, define 'ALLOWED_PROPERTIES' for each relationship to capture the complex 3GPP details (e.g., message names, channels, constraints, conditions).\n4. Focus on creating a schema that supports ROOT CAUSE ANALYSIS and SYSTEM OPTIMIZATION.\n\nReturn STRICTLY a JSON object with the following structure:\n{{\n  \"node_types\": [\n    {{\"label\": \"LabelName\", \"description\": \"Brief definition\"}}\n  ],\n  \"relationship_types\": [\n    {{\n      \"source\": \"SourceLabel\", \n      \"type\": \"CORE_REL_TYPE\", \n      \"target\": \"TargetLabel\",\n      \"allowed_properties\": [\"list\", \"of\", \"property\", \"keys\", \"e.g., protocol, channel, condition\"]\n    }}\n  ]\n}}\n\nSource Text:\n{text}\n\nJSON Output:"

# Extraction Prompt
TRIPLE_EXTRACTION_PROMPT="You are a 3GPP Knowledge Graph expert. \nExtract knowledge triples from the text strictly following the provided ONTOLOGY.\n\nONTOLOGY:\n{ontology}\n\nInstructions:\n1. [STRICT RULE]: Only use Node Labels and Relationship Types defined in the ONTOLOGY. NEVER invent new relationship types.\n2. If a relationship is not explicitly in the ontology but is critical, map it to the most similar core type (e.g., map 'delivers' to 'SENDS_TO').\n3. [PROPERTY RULE]: Extract all specific technical details, conditions, exact values, protocol names, and channel constraints mentioned in the text and place them inside the 'edge_properties' object. This is critical for Root Cause Analysis.\n4. Return strictly a JSON object with a key 'triples'.\n5. Each triple must follow the exact structure shown below.\n\nExpected Triple Structure:\n{{\n  \"head\": \"Specific Node Name\",\n  \"head_label\": \"NodeLabel from Ontology\",\n  \"type\": \"REL_TYPE from Ontology\",\n  \"edge_properties\": {{\n    \"key\": \"Extracted specific detail from text (e.g., 'message': 'RRCSetupRequest', 'condition': 'T310 expiry')\"\n  }},\n  \"tail\": \"Specific Node Name\",\n  \"tail_label\": \"NodeLabel from Ontology\"\n}}\n\nText:\n{text}\n\nJSON Output:"

# Consolidation Prompt
ONTOLOGY_CONSOLIDATION_PROMPT="You are a Senior Ontology Engineer. I will provide you with a raw list of 'Node Types' and 'Relationship Types' extracted from a large 3GPP document. Your job is to MERGE, CLEAN, and STANDARDIZE them into a single, high-quality Ontology.\n\nInstructions:\n1. Merge synonyms (e.g., 'UE', 'User Equipment', 'Terminal' -> 'UserEquipment').\n2. Standardize relationship names (e.g., 'sends_message', 'transmitting' -> 'SENDS').\n3. Remove generic or noisy types (e.g., 'Device', 'Thing').\n4. Keep domain-specific types critical for Root Cause Analysis (e.g., 'Timer', 'RRC_State', 'ProtocolError').\n5. IMPORTANT: Ensure the output is VALID JSON. Escape any backslashes (use \\\\) and do not use single quotes.\n\nRaw Node Types:\n{nodes}\n\nRaw Relationship Types:\n{relationships}\n\nReturn STRICTLY a JSON object with:\n{\n  \"node_types\": [{\"label\": \"StandardLabel\", \"description\": \"Definition\"}],\n  \"relationship_types\": [{\"source\": \"SourceLabel\", \"type\": \"REL_TYPE\", \"target\": \"TargetLabel\"}]\n}"